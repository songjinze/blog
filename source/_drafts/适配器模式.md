---
title: 适配器模式
date: 2018-11-05 08:21:40
tags: 个人经验
categories: 设计模式
---

# 适配器模式

适配器模式，名副其实，就是作为两个不兼容的接口之间的桥梁。举个例子，你买了个显示器，上面只支持HDMI和VGA的视频接口，而你的笔记本只有Type-C接口，这时候对于大众来说唯一能做的就是到店里买一个转接器。那么转接器的设计就是适配器模式。  
再举个常见的例子，写程序的时候定义了一个A接口，当调用A接口的上层程序发生变动时（假设变成了B），那么对于接口A的改动可能是巨大的，一个补救的措施是在A接口的基础之上“包装”一个可以供B调用的B接口。那么这个包装过程也是适配器的应用。

## 使用场景

1. 系统需要使用现有的类，而此类接口不符合系统的需要。
2. 想要建立一个可以重复使用的类，用于一些彼此没有太大关联的类，或者用于日后可能会有的类的使用。
3. 通过增加适配器将一个类加入另一个类的类别中。

## 实现

{% asset_img 适配器模式.PNG 适配器模式 %}

这里左侧AdvancedMediaPlayer作为已经写好的播放器，两个子类VlcPlayer和Mp4Player分别实现了playVLC()和playMp4()方法。  
现在的问题是，我们想要一个方法play(String type)来将播放的格式参数传入播放器中，而不用关心播放的格式需要调用哪个方法。这时首先需要定义一个新的适配器接口MediaPlayer，然后MediaAdapter实现适配器接口方法。  
更进一步，如果想要实现播放其他格式的音频（可能格式不支持，但要有错误信息），这时候可以使用类AudioPlayer来包装组合使用MediaAdapter。  
实际上MediaPlayer就是适配器模式的接口。

## **注意事项**

1. 适配器模式不是在详细设计阶段添加的，它是作为正在服役的项目中的改动的问题，本质上是一种中和的补救措施。
2. 不建议过多的使用适配器。由于在设计阶段接口已经按照一种规则进行了定义，适配器过多会导致这种规则变得不清晰（例如可能会将两个看似毫无逻辑联系的接口适配起来等），会导致系统极其混乱不宜整体把握。所以如果成本允许，应该对系统进行**重构**！