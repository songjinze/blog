---
title: vi编辑器的基本使用
date: 2018-10-13 20:44:08
tags: 课程学习
categories: Linux
---

# vi编辑器基本使用

文本编辑器有很多，图形模式下有gedit，kwrite等编辑器，文本模式下的编辑器有vi，vim（vi的增强版本）和nano。vi和vim是Linux系统中最常用的编辑器，本节主要讲述vi编辑器的使用。

## vi的基本概念

vi编辑器是所有Linux系统的标准编辑器，用于编辑任何ASCII文本，对于编辑源程序尤其有用。它功能十分强大，通过使用vi编辑器，可以对文本进行创建、查找、替换、删除、复制和粘贴等操作。  
vi编辑器有3种基本工作模式，分别是命令行模式、插入模式和末行模式。  

{% asset_img vi的3种模式.PNG vi的3种模式 %}

### 1.命令行模式

控制屏幕光标的移动，字符、字或行的删除，移动、复制某区域及进入插入模式，或者到末行模式。

### 2. 插入模式

只有在插入模式下，才可以做文字输入，按“Esc”键可回到命令行模式。

### 3. 末行模式

将文件保存或退出vi编辑器，也可以设置编辑环境，如寻找字符串、列出行号等。  

## vi的基本操作

本小节主要讲述vi编辑器的基本使用，如使用vi编辑器创建文件、输入数据以及保存文件并退出。

### 1. 进入vi编辑器

在系统Shell提示符下输入vi及文件名称后，就进入vi编辑画面。

### 2. 切换至插入模式编辑文件

在命令行模式下按字母“I”就可以进入插入模式，这时候就可以开始输入文字了。

### 3. 退出vi及保存文件

在命令行模式下，按冒号键“:”可以进入末行模式。  
输入“wq”，存盘并退出vi。  
输入“q!”，不存盘强制退出vi。  

## 命令行模式操作

当在Shell提示符下输入“vi 文件名”之后就能进入了命令行模式，在命令行模式下是不能输入任何数据的。  

### 进入插入模式

进入插入模式的操作如下。  
按“i”：从光标当前位置开始输入文件。  
按“a”：从目前光标所在位置的下一个位置开始输入文字。  
按“o”：在光标所在的行的下面插入一行，从行首开始输入文字。  
按“I”：在光标所在的行的行首插入。  
按“A”：在光标所在的行的行末插入。  
按“O”：在光标所在的行的上面插入一行。  
按“s”：删除光标位置的一个字符，然后进入插入模式。  
按“S”：删除光标所在的行，然后进入插入模式。  

### 从插入模式切换为命令行模式

从插入模式切换为命令行模式只需按“Esc”键。  

### 移动光标

vi可以直接用键盘上的光标来上下左右移动，但正规的vi是用小写英文字母“h”，“j”，“k”及“l”，分别控制光标左、下、上、右移一格。  
按[Ctrl+b]：屏幕往前移动一页。
按[Ctrl+f]：屏幕往后移动一页。  
按[Ctrl+u]：屏幕往前移动半页。  
按[Ctrl+d]：屏幕往后移动半页。  
按数字“0”：光标移动到所在行的行首。  
按“G”：移动到文本的最后一行。  
按“$”：移动到光标所在行的行尾。  
按"^"：移动到光标所在行的行首。  
按"w"：光标跳到下个字的开头。  
按"e"：光标跳到下个字的字尾。
按“b”：光标回到上个字的开头。  

### 删除文字

删除文字操作如下。  
“x”：每按一次，删除光标所在位置的一个字符。  
“nx”：例如，“6x”表示删除光标所在位置开始的6个字符。  
“X”：大写的X，每按一次，删除光标所在位置的前面一个字符。  
“nX”：例如，“20X”表示删除光标所在位置前面20个字符。  
“dd”：删除光标所在行。  
“ndd”：从光标所在行开始删除n行。例如，“4dd”表示删除从光标所在行开始的4行字符。  

### 复制

复制操作如下。  
“yw”：将光标所在之处到字尾的字符复制到缓冲区中。  
“nyw”：复制n个字到缓冲区。  
“yy”：复制光标所在行到缓冲区。  
“nyy”：例如，“6yy”表示复制从光标所在行开始的6行字符。  
“p”：将缓冲区内的内容写到光标所在位置。  

### 替换

替换操作如下。  
“r”：替换光标所在处的字符。
“R”：替换光标所在处的字符，直到按下“Esc”键为止。  

### 撤销上一次操作

“u”：如果误执行一个命令，可以马上按下“u”，回到上一次操作。按多次“u”可以执行多次撤销。

### 跳至指定的行

跳至指定行的操作如下。  
[Ctrl+g]：列出光标所在的行号。  
“nG”：例如，“15G”，表示移动光标至该文本的第15行行首。  

### 存盘退出

“ZZ”：存盘退出。  

### 不存盘退出

“ZQ”：不存盘退出。

## 末行模式操作

在使用末行模式之前，请记住先按“Esc”键确定已经处于命令行模式后，再按冒号“:”即可进入末行模式。  

### 列出行号

“set nu”：输入“set nu”后，会在文件中的每一行前面列出行号。  

### 取消列出行号

“set nonu”：输入“set nonu”后，会取消在文件中的每一行前面列出行号。

### 跳到文件中的某一行

“n”：“n”号表示一个数字，在冒号后输入一个数字，再按“回车”键就会跳到该行了，如输入数字15，再按“回车”键就会跳到文本的第15行。

### 查找字符

查找字符操作如下。  
“/关键字”：先按“/”键，再输入想查找的字符，如果第一次查找的关键字不是想要的，可以一直按“n”会往后查找下一个关键字。  
“?关键字”：先按“?”键，再输入想查找的字符，如果第一次查找的关键字不是想要的，可以一直按“n”往前查找下一个关键字。  

### 运行Shell命令

“!命令”：运行Shell命令。

### 替换字符

替换字符操作如下。  
“s /a/b”：将光标所在行第一个a替换为b。  
"s /a/b/g"：将光标所在行所有的a替换为b。  

### 保存文件

“w”：在冒号后输入字母“w”就可以将文件保存起来。  


### 退出vi编辑器

离开vi编辑器操作如下。  
“q”：按“q”即退出vi，如果无法离开vi，可以在“q”后跟一个“!”强制符离开vi。  
"wq"：一般建议离开时，搭配“w”一起使用，这样在退出的时候还可以保存文件。  