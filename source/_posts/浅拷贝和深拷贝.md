---
title: 浅拷贝和深拷贝
tags: 计算机原理
categories: 计算机原理
date: 2019-03-07 15:28:55
---


## 浅拷贝和深拷贝

### 什么是浅拷贝？

{% asset_img shallow.PNG shallow %}

变量A、B指向不同的内存地址，当B被“赋值（准确的说这不是一个赋值操作）”给A时，**浅拷贝将A的内存地址赋值给了B**，这样A、B指向了同一个内存地址，B原来的内存地址引用数-1。  

### 什么是深拷贝？

{% asset_img deep.PNG deep %}

变量A、B同样指向不同的内存地址，同样进行“赋值”操作时，**深拷贝将A内存地址指向的内容拷贝给了B内存地址指向的内容**，这样A、B指向的内存地址没有发生变化，而是内存地址中的内容发生了变化。

### 应用

实际上java除了基本数据类型之外，创建的对象都是引用，也就是说当进行a=b的赋值操作时，都是使用浅拷贝。  
如果想使用深拷贝可以用以下两种方式：
* 序列化一个对象，再通过反序列化得到一个新对象。
* 利用clone()方法，但需要重写方法内部来自己定义类中哪些成员需要clone。